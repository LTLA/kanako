<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Global - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/LTLA/bakana" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Classes</h3><ul><li><a href="AdtNormalizationState.html">AdtNormalizationState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AdtNormalizationState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="AdtNormalizationState.html#fetchExpression">fetchExpression</a></li><li data-type='method' style='display: none;'><a href="AdtNormalizationState.html#summary">summary</a></li></ul></li><li><a href="AdtPcaState.html">AdtPcaState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AdtPcaState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="AdtPcaState.html#summary">summary</a></li></ul></li><li><a href="AdtQualityControlState.html">AdtQualityControlState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AdtQualityControlState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="AdtQualityControlState.html#summary">summary</a></li></ul></li><li><a href="BatchCorrectionState.html">BatchCorrectionState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="BatchCorrectionState.html#compute">compute</a></li></ul></li><li><a href="CellFilteringState.html">CellFilteringState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CellFilteringState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="CellFilteringState.html#fetchFilteredAnnotations">fetchFilteredAnnotations</a></li><li data-type='method' style='display: none;'><a href="CellFilteringState.html#fetchFilteredBlock">fetchFilteredBlock</a></li><li data-type='method' style='display: none;'><a href="CellFilteringState.html#summary">summary</a></li><li data-type='method' style='display: none;'><a href="CellFilteringState.html#undoFiltering">undoFiltering</a></li></ul></li><li><a href="CellLabellingState.html">CellLabellingState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CellLabellingState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="CellLabellingState.html#summary">summary</a></li></ul></li><li><a href="ChooseClusteringState.html">ChooseClusteringState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ChooseClusteringState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="ChooseClusteringState.html#fetchClusterIndices">fetchClusterIndices</a></li><li data-type='method' style='display: none;'><a href="ChooseClusteringState.html#summary">summary</a></li></ul></li><li><a href="CombineEmbeddingsState.html">CombineEmbeddingsState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CombineEmbeddingsState.html#compute">compute</a></li></ul></li><li><a href="CustomSelectionsState.html">CustomSelectionsState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CustomSelectionsState.html#addSelection">addSelection</a></li><li data-type='method' style='display: none;'><a href="CustomSelectionsState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="CustomSelectionsState.html#fetchResults">fetchResults</a></li><li data-type='method' style='display: none;'><a href="CustomSelectionsState.html#fetchSelectionIndices">fetchSelectionIndices</a></li><li data-type='method' style='display: none;'><a href="CustomSelectionsState.html#fetchSelections">fetchSelections</a></li><li data-type='method' style='display: none;'><a href="CustomSelectionsState.html#removeSelection">removeSelection</a></li><li data-type='method' style='display: none;'><a href="CustomSelectionsState.html#summary">summary</a></li></ul></li><li><a href="FeatureSelectionState.html">FeatureSelectionState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="FeatureSelectionState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="FeatureSelectionState.html#summary">summary</a></li></ul></li><li><a href="InputsState.html">InputsState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="InputsState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="InputsState.html#fetchAnnotations">fetchAnnotations</a></li><li data-type='method' style='display: none;'><a href="InputsState.html#setDirectSubset">setDirectSubset</a></li><li data-type='method' style='display: none;'><a href="InputsState.html#summary">summary</a></li><li data-type='method' style='display: none;'><a href="InputsState.html#undoSubset">undoSubset</a></li></ul></li><li><a href="KmeansClusterState.html">KmeansClusterState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="KmeansClusterState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="KmeansClusterState.html#summary">summary</a></li></ul></li><li><a href="MarkerDetectionState.html">MarkerDetectionState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="MarkerDetectionState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="MarkerDetectionState.html#fetchGroupResults">fetchGroupResults</a></li><li data-type='method' style='display: none;'><a href="MarkerDetectionState.html#numberOfGroups">numberOfGroups</a></li><li data-type='method' style='display: none;'><a href="MarkerDetectionState.html#summary">summary</a></li></ul></li><li><a href="NeighborIndexState.html">NeighborIndexState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="NeighborIndexState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="NeighborIndexState.html#summary">summary</a></li></ul></li><li><a href="NormalizationState.html">NormalizationState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="NormalizationState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="NormalizationState.html#fetchExpression">fetchExpression</a></li><li data-type='method' style='display: none;'><a href="NormalizationState.html#summary">summary</a></li></ul></li><li><a href="PcaState.html">PcaState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="PcaState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="PcaState.html#summary">summary</a></li></ul></li><li><a href="QualityControlState.html">QualityControlState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="QualityControlState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="QualityControlState.html#summary">summary</a></li></ul></li><li><a href="SnnGraphClusterState.html">SnnGraphClusterState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SnnGraphClusterState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="SnnGraphClusterState.html#summary">summary</a></li></ul></li><li><a href="TsneState.html">TsneState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TsneState.html#animate">animate</a></li><li data-type='method' style='display: none;'><a href="TsneState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="TsneState.html#summary">summary</a></li></ul></li><li><a href="UmapState.html">UmapState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="UmapState.html#animate">animate</a></li><li data-type='method' style='display: none;'><a href="UmapState.html#compute">compute</a></li><li data-type='method' style='display: none;'><a href="UmapState.html#summary">summary</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#analysisDefaults">analysisDefaults</a></li><li><a href="global.html#availableReaders">availableReaders</a></li><li><a href="global.html#callScran">callScran</a></li><li><a href="global.html#configureApproximateNeighbors">configureApproximateNeighbors</a></li><li><a href="global.html#configureBatchCorrection">configureBatchCorrection</a></li><li><a href="global.html#createAnalysis">createAnalysis</a></li><li><a href="global.html#createKanaFile">createKanaFile</a></li><li><a href="global.html#createKanaFileInternal">createKanaFileInternal</a></li><li><a href="global.html#createTsneWorker">createTsneWorker</a></li><li><a href="global.html#freeAnalysis">freeAnalysis</a></li><li><a href="global.html#guessApproximateNeighborsConfig">guessApproximateNeighborsConfig</a></li><li><a href="global.html#guessBatchCorrectionConfig">guessBatchCorrectionConfig</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#kanaFormatVersion">kanaFormatVersion</a></li><li><a href="global.html#loadAnalysis">loadAnalysis</a></li><li><a href="global.html#parseKanaFile">parseKanaFile</a></li><li><a href="global.html#promoteToNumber">promoteToNumber</a></li><li><a href="global.html#readLines">readLines</a></li><li><a href="global.html#readTable">readTable</a></li><li><a href="global.html#removeHDF5File">removeHDF5File</a></li><li><a href="global.html#retrieveParameters">retrieveParameters</a></li><li><a href="global.html#runAnalysis">runAnalysis</a></li><li><a href="global.html#saveAnalysis">saveAnalysis</a></li><li><a href="global.html#setCellLabellingDownload">setCellLabellingDownload</a></li><li><a href="global.html#setCreateLink">setCreateLink</a></li><li><a href="global.html#setResolveLink">setResolveLink</a></li><li><a href="global.html#setVisualizationAnimate">setVisualizationAnimate</a></li><li><a href="global.html#subsetInputs">subsetInputs</a></li><li><a href="global.html#summarizeArray">summarizeArray</a></li><li><a href="global.html#terminate">terminate</a></li><li><a href="global.html#unpackText">unpackText</a></li><li><a href="global.html#validateAnnotations">validateAnnotations</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Global</h1>
    

    




<section>

<header>
    
        <h2>
        
        </h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




            

            
        
        </div>
    

    

    

    
    
    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="availableReaders"><span class="type-signature"></span>availableReaders<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="readers_index.js.html">readers/index.js</a>, <a href="readers_index.js.html#line17">line 17</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>List of available readers.
Each key specifies a matrix format; the corresponding value should be an ES6 module containing methods to interpret that format.
See custom_readers for details on adding new readers.</p>
</div>








        
            
<h4 class="name" id="kanaFormatVersion"><span class="type-signature">(constant) </span>kanaFormatVersion<span class="type-signature"> :number</span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="serialize.js.html">serialize.js</a>, <a href="serialize.js.html#line9">line 9</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Current version of the kana format.
This is encoded as an <code>XXXYYYZZZ</code> integer for version <code>XXX.YYY.ZZZ</code>, e.g., 1001002 for version 1.1.2.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">number</span>


        </li>
    </ul>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="analysisDefaults"><span class="type-signature"></span>analysisDefaults<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="defaults.js.html">defaults.js</a>, <a href="defaults.js.html#line37">line 37</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Generate an object containing all of the default analysis parameters.</p>
</div>

























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An object where each property corresponds to an analysis step and contains the default parameters for that step.
See the documentation for each step's <code>compute</code> method for more details:</p>
<ul>
<li><a href="InputsState.html#compute"><code>inputs</code></a></li>
<li><a href="QualityControlState.html#compute"><code>quality_control</code></a></li>
<li><a href="AdtQualityControlState.html#compute"><code>adt_quality_control</code></a></li>
<li><code>cell_filtering</code></li>
<li><a href="FeatureSelectionState.html#compute"><code>feature_selection</code></a></li>
<li><a href="PcaState.html#compute"><code>pca</code></a></li>
<li><a href="NeighborIndexState.html#compute"><code>neighbor_index</code></a></li>
<li><a href="TsneState.html#compute"><code>tsne</code></a></li>
<li><a href="UmapState.html#compute"><code>umap</code></a></li>
<li><a href="KmeansClusterState.html#compute"><code>kmeans_cluster</code></a></li>
<li><a href="SnnGraphClusterState.html#compute"><code>snn_graph_cluster</code></a></li>
<li><a href="ChooseClusteringState.html#compute"><code>choose_clustering</code></a></li>
<li><a href="CellLabellingState.html#compute"><code>cell_labelling</code></a></li>
</ul>
<p>See also <a href="global.html#configureBatchCorrection"><code>configureBatchCorrection</code></a> and <a href="global.html#configureApproximateNeighbors"><code>configureApproximateNeighbors</code></a> to synchronize certain parameter settings across multiple steps.</p>
</div>



    



        
            

    

    <h4 class="name" id="callScran"><span class="type-signature"></span>callScran<span class="signature">(fun)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line55">line 55</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Call a <strong>scran.js</strong> function.
This allows client applications to operate in the same <strong>scran.js</strong> memory space as <strong>bakana</strong> functions,
which is not guaranteed if applications import <strong>scran.js</strong> on their own (e.g., due to name mangling with Webpack).</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fun</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>A function that accepts the <strong>scran.js</strong> module object and presumably calls some of its functions.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The return value of <code>fun</code>.</p>
</div>



    



        
            

    

    <h4 class="name" id="configureApproximateNeighbors"><span class="type-signature"></span>configureApproximateNeighbors<span class="signature">(parameters, approximate)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="defaults.js.html">defaults.js</a>, <a href="defaults.js.html#line201">line 201</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Specify whether approximate neighbor searches should be performed across all affected steps.
This is a convenient helper as it is generally unnecessary to switch between exact and approximate searches in different steps.
Affected steps are <a href="BatchCorrectionState.html">BatchCorrectionState</a>, <a href="CombineEmbeddingsState.html">CombineEmbeddingsState</a> and <a href="NeighborIndexState.html">NeighborIndexState</a>.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>parameters</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>Object containing parameters for all steps, e.g., from <a href="global.html#analysisDefaults"><code>analysisDefaults</code></a>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>approximate</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last"><p>Whether to perform approximate nearest neighbor searces.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p><code>parameters</code> is modified with appropriate parameters in relevant steps, e.g., <code>batch_correction</code>, <code>combine_embeddings</code> and <code>neighbor_index</code>.</p>
</div>



    



        
            

    

    <h4 class="name" id="configureBatchCorrection"><span class="type-signature"></span>configureBatchCorrection<span class="signature">(parameters, method)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="defaults.js.html">defaults.js</a>, <a href="defaults.js.html#line113">line 113</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Set the batch correction parameters across multiple steps.
This is a convenient helper as the correction process is split across the PCA and batch correction steps.
For MNN, we need to weight by block in the <a href="PcaState.html">PcaState</a> before performing MNN correction in <a href="BatchCorrectionState.html">BatchCorrectionState</a>;
for linear regression, we need to regress by block in <a href="PcaState.html">PcaState</a> without any additional correctioni in <a href="BatchCorrectionState.html">BatchCorrectionState</a>;
and for no correction, we need to turn off any block handling in <a href="PcaState.html">PcaState</a>as well as removing any additional correction in <a href="BatchCorrectionState.html">BatchCorrectionState</a>.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>parameters</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>Object containing parameters for all steps, e.g., from <a href="global.html#analysisDefaults"><code>analysisDefaults</code></a>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>method</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Correction method to perform, one of <code>&quot;mnn&quot;</code>, &quot;<code>regress&quot;</code> or <code>&quot;none&quot;</code>.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p><code>parameters</code> is modified with appropriate parameters in <code>batch_correction</code>, <code>pca</code> and <code>adt_pca</code>.</p>
</div>



    



        
            

    

    <h4 class="name" id="createAnalysis"><span class="type-signature"></span>createAnalysis<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="analysis.js.html">analysis.js</a>, <a href="analysis.js.html#line59">line 59</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Create a new analysis state in preparation for calling <a href="global.html#runAnalysis"><code>runAnalysis</code></a>.
Multiple states can be created and used interchangeably within the same Javascript runtime.</p>
</div>

























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A promise that resolves to an object containing states for all analysis steps.
This object can be used as input into <a href="global.html#runAnalysis"><code>runAnalysis</code></a>.</p>
</div>



    



        
            

    

    <h4 class="name" id="createKanaFile"><span class="type-signature"></span>createKanaFile<span class="signature">(statePath, inputFiles, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="serialize.js.html">serialize.js</a>, <a href="serialize.js.html#line31">line 31</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Create a <code>*.kana</code> file from the HDF5 state file and the various data files.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>statePath</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>String containing a file path to an existing HDF5 state file.
This should be the same as the <code>path</code> used in <a href="global.html#saveAnalysis"><code>saveAnalysis</code></a>.
On browsers, the path should exist inside the virtual file system of the <strong>scran.js</strong> module.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>inputFiles</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Array of files to be embedded into the <code>*.kana</code> file.
On Node.js, this should be an array of file paths; on browsers, this should be an array of ArrayBuffers.
Typically this is obtained as the resolved return value of <a href="global.html#saveAnalysis"><code>saveAnalysis</code></a>.</p>
<p>If <code>null</code>, it is assumed that files are linked instead of embedded.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Further options.
For Node.js, callers can specify <code>outputPath</code>, a string containing the output path for the newly created <code>*.kana</code> file.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>For Node.js, a promise is returned that resolves to a path to a new <code>*.kana</code> file.
This is equal to <code>outputPath</code> if supplied, otherwise a path to a file in a temporary directory is returned.</p>
<p>In browsers, an ArrayBuffer is returned containing the full contents of the new <code>*.kana</code> file.</p>
</div>



    



        
            

    

    <h4 class="name" id="createKanaFileInternal"><span class="type-signature"></span>createKanaFileInternal<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="abstract_serialize.js.html">abstract/serialize.js</a>, <a href="abstract_serialize.js.html#line12">line 12</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>This contains a function to create and load a kana file with Node.</p>
</div>




























        
            

    

    <h4 class="name" id="createKanaFileInternal"><span class="type-signature"></span>createKanaFileInternal<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="abstract_serialize_node.js.html">abstract/serialize_node.js</a>, <a href="abstract_serialize_node.js.html#line12">line 12</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>This contains a function to create and load a kana file with Node.</p>
</div>




























        
            

    

    <h4 class="name" id="createKanaFileInternal"><span class="type-signature"></span>createKanaFileInternal<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="abstract_serialize_web.js.html">abstract/serialize_web.js</a>, <a href="abstract_serialize_web.js.html#line10">line 10</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>This contains a function to create and load a kana file with the browser.</p>
</div>




























        
            

    

    <h4 class="name" id="createTsneWorker"><span class="type-signature"></span>createTsneWorker<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="abstract_worker_parent_web.js.html">abstract/worker_parent_web.js</a>, <a href="abstract_worker_parent_web.js.html#line8">line 8</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Webpack (or something in kana's build system) specifically recognizes the
hard-coded path in this 'new Worker(new URL(...))' pattern. This is why we
have hard-coded creators for the workers rather than allowing callers to
pass in the URL as a variable, as that doesn't pack the worker's JS.</p>
</div>




























        
            

    

    <h4 class="name" id="freeAnalysis"><span class="type-signature"></span>freeAnalysis<span class="signature">(state)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="analysis.js.html">analysis.js</a>, <a href="analysis.js.html#line106">line 106</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Free the contents of an analysis state.
This releases memory on the <strong>scran.js</strong> Wasm heap and terminates any workers associated with this analysis.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"><p>An existing analysis state, produced by <a href="global.html#createAnalysis"><code>createAnalysis</code></a> or <a href="global.html#loadAnalysis"><code>loadAnalysis</code></a>.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A promise that resolves to <code>null</code> when all states are freed.</p>
</div>



    



        
            

    

    <h4 class="name" id="guessApproximateNeighborsConfig"><span class="type-signature"></span>guessApproximateNeighborsConfig<span class="signature">(parameters, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; (nullable) {boolean}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="defaults.js.html">defaults.js</a>, <a href="defaults.js.html#line220">line 220</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Guess the value of <code>approximate</code> from <a href="global.html#configureApproximateNeighbors"><code>configureApproximateNeighbors</code></a> based on the parameter object.
This effectively consolidates the various approximation parameters into a single setting.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>parameters</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Object containing parameters for all steps, typically after <a href="global.html#configureApproximateNeighbors"><code>configureApproximateNeighbors</code></a>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>strict</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Whether to only report <code>approximate</code> when the set of parameters modified by <a href="global.html#configureApproximateNeighbors"><code>configureApproximateNeighbors</code></a> are consistent.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Whether or not approximate neighbor search was used.
If <code>strict = false</code> and there is a mixture of approximate and exact matches, an approximate search is reported;
otherwise, if <code>strict = true</code>, <code>null</code> is returned.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="guessBatchCorrectionConfig"><span class="type-signature"></span>guessBatchCorrectionConfig<span class="signature">(parameters, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; (nullable) {string}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="defaults.js.html">defaults.js</a>, <a href="defaults.js.html#line150">line 150</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Guess the <code>method</code> value from <a href="global.html#configureBatchCorrection"><code>configureBatchCorrection</code></a> based on the parameter object.
This effectively consolidates the various correction parameters into a single setting.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>parameters</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Object containing parameters for all steps, typically after <a href="global.html#configureBatchCorrection"><code>configureBatchCorrection</code></a>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>strict</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Whether to only report the <code>method</code> when the set of parameters modified by <a href="global.html#configureBatchCorrection"><code>configureBatchCorrection</code></a> are consistent.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>One of <code>&quot;mnn&quot;</code>, <code>&quot;regress&quot;</code> or <code>&quot;none&quot;</code>, based on the expected set of modifications from <a href="global.html#configureBatchCorrection"><code>configureBatchCorrection</code></a>.
If <code>strict = false</code> and there is no exact match to the expected set, the most appropriate method is returned;
otherwise, if <code>strict = true</code>, <code>null</code> is returned.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="initialize"><span class="type-signature"></span>initialize<span class="signature">(options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line25">line 25</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Initialize the backend for computation.
This is required prior to running any other <strong>bakana</strong> function.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>numberOfThreads</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Number of threads used by <strong>scran.js</strong>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>localFile</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Whether to use local file paths for imported modules in <strong>scran.js</strong>.
This only needs to be <code>true</code> for old Node versions that do not support file URIs.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A promise that resolves to <code>null</code> when initialization is complete.</p>
</div>



    



        
            

    

    <h4 class="name" id="loadAnalysis"><span class="type-signature"></span>loadAnalysis<span class="signature">(path, loadFun, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="analysis.js.html">analysis.js</a>, <a href="analysis.js.html#line440">line 440</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Load an analysis state from a HDF5 state file, usually excised from a <code>*.kana</code> file.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Path to the HDF5 file containing the analysis state.
On browsers, this should lie inside the virtual file system of the <strong>scran.js</strong> module.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>loadFun</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Function to load each embedded data file.
This should accept two arguments - an offset to the start of the file in the embedded file buffer, and the size of the file.</p>
<p>In the browser, the function should return an ArrayBuffer containing the contents of the file.
For Node.js, the function should return a string containing a path to the file.
In both cases, the function may instead return a promise that resolves to the expected values.</p>
<p>Note that this function is only used if the state file at <code>path</code> contains information for embedded files;
otherwise, links are resolved using reader-specific functions (see <a href="global.html#setResolveLink"><code>setResolveLink</code></a> for the common use cases).</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>finishFun</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Function that is called on after extracting results for each step.
This should accept two arguments - the name of the step and an object containing the results of that step.
If <code>null</code>, a no-op function is automatically created.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An object containing the loaded analysis state.
This is conceptually equivalent to creating a state with <a href="global.html#createAnalysis"><code>createAnalysis</code></a> and running it through <a href="global.html#runAnalysis"><code>runAnalysis</code></a>.</p>
</div>



    



        
            

    

    <h4 class="name" id="parseKanaFile"><span class="type-signature"></span>parseKanaFile<span class="signature">(input, statePath, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="serialize.js.html">serialize.js</a>, <a href="serialize.js.html#line55">line 55</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Parse a <code>*.kana</code> file by extracting the HDF5 state file and returning a function to extract embeddded data files.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">ArrayBuffer</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The input <code>*.kana</code> file.
For Node.js, this should be a string containing a path to the file.
On browsers, this should be an ArrayBuffer containing the full file contents.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>statePath</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>String containing a file path to save the HDF5 state file.
This will also be the path supplied to <a href="global.html#loadAnalysis"><code>loadAnalysis</code></a> to load the state into memory.
On browsers, this will exist inside the virtual file system of the <strong>scran.js</strong> module.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Further options.
For Node.js, callers can specify <code>stageDir</code>, a string containing a path to a staging directory for the extracted data files.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The HDF5 state file is written to <code>statePath</code>.
In the browser, if <code>input</code> contains embedded files, a function is returned that extracts each data file given its offset and size.
(This should be used as <code>loadFun</code> in <a href="global.html#loadAnalysis"><code>loadAnalysis</code></a>.)
If <code>input</code> contains linked files, <code>null</code> is returned.</p>
<p>For Node.js, a promise is returned that evaluates to the aforementioned function or <code>null</code>.</p>
</div>



    



        
            

    

    <h4 class="name" id="promoteToNumber"><span class="type-signature"></span>promoteToNumber<span class="signature">(x)</span><span class="type-signature"> &rarr; (nullable) {Float64Array}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="readers_utils_extract.js.html">readers/utils/extract.js</a>, <a href="readers_utils_extract.js.html#line169">line 169</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Detect if an array contains only stringified numbers and, if so, convert it into a TypedArray.
Conversion will still be performed for non-number strings corresponding to missing values or explicit not-a-number entries.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>Array of strings, usually corresponding to a column in a table read by <code>readDSVFromBuffer</code>.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A Float64Array is returned if <code>x</code> contains stringified numbers.
Otherwise, <code>null</code> is returned if the conversion could not be performed.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Float64Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="readLines"><span class="type-signature"></span>readLines<span class="signature">(buffer, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Array}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="readers_utils_extract.js.html">readers/utils/extract.js</a>, <a href="readers_utils_extract.js.html#line112">line 112</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Read lines of text from a buffer, possibly with decompression.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>buffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">Uint8Array</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Content to be read.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>compression</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last"><p>See <a href="global.html#unpackText"><code>unpackText</code></a> for details.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Array of strings where each entry contains a line in <code>buffer</code>.
The newline itself is not included in each string.
A trailing newline at the end of each file is removed.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="readTable"><span class="type-signature"></span>readTable<span class="signature">(content, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Array}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="readers_utils_extract.js.html">readers/utils/extract.js</a>, <a href="readers_utils_extract.js.html#line134">line 134</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Read a delimiter-separated table from a buffer, possibly with decompression.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>content</code></td>
            

            <td class="type">
            
                
<span class="param-type">Uint8Array</span>
|

<span class="param-type">ArrayBuffer</span>
|

<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Content to be read as an ArrayBuffer or Uint8Array.
For Node.js, this may be also a string containing a path to a file.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>compression</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last"><p>See <a href="global.html#unpackText"><code>unpackText</code></a> for details.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>delim</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Delimiter between fields.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>firstOnly</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Whether to only read the first line, presumably containing the header.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Array of arrays where each entry corresponds to a line in <code>buffer</code> and contains the <code>delim</code>-separated fields.
If <code>firstOnly = true</code>, the output array only contains one element corresponding to the contents of the first line.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="removeHDF5File"><span class="type-signature"></span>removeHDF5File<span class="signature">(path)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="serialize.js.html">serialize.js</a>, <a href="serialize.js.html#line69">line 69</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Remove a HDF5 file at the specified path, typically corresponding to the value of <code>statePath</code> in <a href="global.html#saveAnalysis"><code>saveAnalysis</code></a> or <a href="global.html#loadAnalysis"><code>loadAnalysis</code></a>.
Such files are typically temporary intermediates that are generated from or used to generate a <code>*.kana</code> file.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Path to a HDF5 file.
On browsers, this path will exist inside the <strong>scran.js</strong> virtual filesystem.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The specified file is removed.
If the file does not exist, this function is a no-op.</p>
</div>



    



        
            

    

    <h4 class="name" id="retrieveParameters"><span class="type-signature"></span>retrieveParameters<span class="signature">(state)</span><span class="type-signature"> &rarr; {object}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="analysis.js.html">analysis.js</a>, <a href="analysis.js.html#line581">line 581</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Retrieve analysis parameters from a state object.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>Object containing the analysis state, produced by <a href="global.html#createAnalysis"><code>createAnalysis</code></a> or <a href="global.html#loadAnalysis"><code>loadAnalysis</code></a>.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Object containing the analysis parameters for each step, similar to that created by <a href="global.html#analysisDefaults"><code>analysisDefaults</code></a>.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="runAnalysis"><span class="type-signature"></span>runAnalysis<span class="signature">(state, matrices, params, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="analysis.js.html">analysis.js</a>, <a href="analysis.js.html#line151">line 151</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Run a basic single-cell RNA-seq analysis with the specified files and parameters.
This will cache the results from each step so that, if the parameters change, only the affected steps will be rerun.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Object containing the analysis state, produced by <a href="global.html#createAnalysis"><code>createAnalysis</code></a> or <a href="global.html#loadAnalysis"><code>loadAnalysis</code></a>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>matrices</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Object where each (arbitrarily named) property corresponds to an input matrix.
Each matrix should be an object with <code>type</code> string property and any number of additional properties referring to individual data files.</p>
<ul>
<li>If <code>type: &quot;MatrixMarket&quot;</code>, the object should contain an <code>mtx</code> property, referring to a (possibly Gzipped) Matrix Market file containing a count matrix.
The object may contain a <code>genes</code> property, referring to a (possibly Gzipped) tab-separated file with the gene ID and symbols for each row of the count matrix.
The object may contain a <code>annotation</code> property, referring to a (possibly Gzipped) tab-separated file with the gene ID and symbols for each row of the count matrix.</li>
<li>If <code>type: &quot;10X&quot;</code>, the object should contain an <code>h5</code> property, referring to a HDF5 file following the 10X Genomics feature-barcode matrix format.
It is assumed that the matrix has already been filtered to contain only the cell barcodes.</li>
<li>If <code>type: &quot;H5AD&quot;</code>, the object should contain an <code>h5</code> property, referring to a H5AD file.</li>
</ul>
<p>The representation of each reference to a data file depends on the runtime.
In the browser, each data file manifests as a <code>File</code> object; for Node.js, each data file should be represented as a string containing a file path.</p>
<p>Alternatively, <code>matrices</code> may be <code>null</code>, in which case the count matrices are extracted from <code>state</code>.
This assumes that the data matrices were already cached in <code>state</code>, either from a previous call to <a href="global.html#runAnalysis"><code>runAnalysis</code></a> or from @{linkcode loadAnalysis}.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>An object containing parameters for all steps.
See <a href="global.html#analysisDefaults"><code>analysisDefaults</code></a> for more details.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>startFun</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Function that is called when each step is started.
This should accept a single argument - the name of the step.
If <code>null</code>, nothing is executed.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>finishFun</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Function that is called on successful execution of each step.
This should accept two arguments - the name of the step and an object containing the results of that step.
(The latter will be undefined if the step uses a previously cached result.)
If <code>null</code>, nothing is executed.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A promise that resolves to <code>null</code> when all asynchronous analysis steps are complete.
The contents of <code>state</code> are modified by reference to reflect the latest state of the analysis with the supplied parameters.</p>
</div>



    



        
            

    

    <h4 class="name" id="saveAnalysis"><span class="type-signature"></span>saveAnalysis<span class="signature">(state, path, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="analysis.js.html">analysis.js</a>, <a href="analysis.js.html#line358">line 358</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Save the current analysis state into a HDF5 file.
This HDF5 file can then be embedded into a <code>*.kana</code> file for distribution.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Object containing the analysis state, produced by <a href="global.html#createAnalysis"><code>createAnalysis</code></a> or <a href="global.html#loadAnalysis"><code>loadAnalysis</code></a>.
If produced by <a href="global.html#createAnalysis"><code>createAnalysis</code></a>, it should have been run through <a href="global.html#runAnalysis"><code>runAnalysis</code></a> beforehand.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Path to the output HDF5 file.
On browsers, this will lie inside the virtual file system of the <strong>scran.js</strong> module.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>embedded</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Whether to store information for embedded data files.
If <code>false</code>, links to data files are stored instead, see <a href="global.html#setCreateLink"><code>setCreateLink</code></a>.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A HDF5 file is created at <code>path</code> containing the analysis parameters and results - see https://ltla.github.io/kanaval for more details on the structure.
If <code>embedded = false</code>, a promise is returned that resolves to <code>null</code> when the saving is complete.
Otherwise, an object is returned containing:</p>
<ul>
<li><code>collected</code>: an array of length equal to the number of data files.
If <code>linkFun: null</code>, each element is an ArrayBuffer containing the file contents, which can be used to assemble an embedded <code>*.kana</code> file.
Otherwise, if <code>linkFun</code> is supplied, each element is a string containing the linking identifier to the corresponding file.</li>
<li><code>total</code>: an integer containing the total length of all ArrayBuffers in <code>collected</code>.
This will only be present if <code>linkFun</code> is not supplied.</li>
</ul>
</div>



    



        
            

    

    <h4 class="name" id="setCellLabellingDownload"><span class="type-signature"></span>setCellLabellingDownload<span class="signature">(fun)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="steps_cell_labelling.js.html">steps/cell_labelling.js</a>, <a href="steps_cell_labelling.js.html#line456">line 456</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Specify a function to download references for the cell labelling step.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fun</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Function that accepts a single string containing a URL,
and returns an ArrayBuffer of that URL's contents.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p><code>fun</code> is set as the global downloader for this step.
The <em>previous</em> value of the downloader is returned.</p>
</div>



    



        
            

    

    <h4 class="name" id="setCreateLink"><span class="type-signature"></span>setCreateLink<span class="signature">(fun)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="readers_utils_serialize.js.html">readers/utils/serialize.js</a>, <a href="readers_utils_serialize.js.html#line35">line 35</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Specify a function to create links for data files.
By default, this only affects files for the MatrixMarket, H5AD and 10X formats, and is only used when linking is requested.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fun</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Function that returns a linking idenfier to a data file.
The function should accept the following arguments:</p>
<ul>
<li>A string specifying the type of the file, e.g., <code>&quot;mtx&quot;</code>, <code>&quot;h5&quot;</code>.</li>
<li>A string containing the name of the file.</li>
<li>An ArrayBuffer containing the file content (for browsers) or a string containing the file path (for Node.js),</li>
</ul>
<p>The function is expected to return a string containing some unique identifier to the file.
This is most typically used to register the file with some user-specified database system for later retrieval.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p><code>fun</code> is set as the global link creator for this step.
The <em>previous</em> value of the creator is returned.</p>
</div>



    



        
            

    

    <h4 class="name" id="setResolveLink"><span class="type-signature"></span>setResolveLink<span class="signature">(fun)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="readers_utils_serialize.js.html">readers/utils/serialize.js</a>, <a href="readers_utils_serialize.js.html#line51">line 51</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Specify a function to resolve links for data files.
By default, this only affects files for the MatrixMarket, H5AD and 10X formats, and is only used when links are detected.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fun</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Function that accepts a string containing a linking idenfier and returns an ArrayBuffer containing the file content (for browsers) or a string containing the file path (for Node.js),
This is most typically used to retrieve a file from some user-specified database system.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p><code>fun</code> is set as the global resolver for this step.
The <em>previous</em> value of the resolver is returned.</p>
</div>



    



        
            

    

    <h4 class="name" id="setVisualizationAnimate"><span class="type-signature"></span>setVisualizationAnimate<span class="signature">(fun)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="steps_utils_viz_parent.js.html">steps/utils/viz_parent.js</a>, <a href="steps_utils_viz_parent.js.html#line21">line 21</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Specify a function to handle animation iterations for the low-dimensional embeddings.
The exact nature of this handling is arbitrary - developers may post the contents to another thread, save them to file, etc.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fun</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Function to process each animation iteration.
This should accept four arguments, in the following order:</p>
<ul>
<li>A string containing either <code>&quot;tsne&quot;</code> or <code>&quot;umap&quot;</code>.</li>
<li>A <code>Float64Array</code> containing the x-coordinates for each cell.</li>
<li>A <code>Float64Array</code> containing the y-coordinates for each cell.</li>
<li>An integer specifying the iteration number.</li>
</ul></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p><code>fun</code> is set as the global animator function for t-SNE and UMAP.
The <em>previous</em> value of the animator is returned.</p>
</div>



    



        
            

    

    <h4 class="name" id="subsetInputs"><span class="type-signature"></span>subsetInputs<span class="signature">(state, indices, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="analysis.js.html">analysis.js</a>, <a href="analysis.js.html#line610">line 610</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Create a new analysis state object consisting of a subset of cells from an existing analysis state.
This assumes that the existing state already contains loaded matrix data in its <code>inputs</code> property,
which allows us to create a cheap reference without reloading the data into memory.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>State object such as that produced by <a href="global.html#createAnalysis"><code>createAnalysis</code></a> or <code>linkAnalysis</code>.
This should already contain loaded data, e.g., after a run of <a href="global.html#runAnalysis"><code>runAnalysis</code></a>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>indices</code></td>
            

            <td class="type">
            
                
<span class="param-type">TypedArray</span>
|

<span class="param-type">Array</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Array containing the indices for the desired subset of cells.
This should be sorted and non-duplicate.
Any existing subset in <code>state</code> will be overridden by <code>indices</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>copy</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>true</code>
                
                </td>
            

            <td class="description last"><p>Whether to make a copy of <code>indices</code> before storing it inside the returned state object.
If <code>false</code>, it is assumed that the caller makes no further use of the passed <code>indices</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>onOriginal</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last"><p>Whether <code>indices</code> contains indices on the original dataset or on the dataset in <code>state</code>.
This distinction is only relevant if <code>state</code> itself contains an analysis of a subsetted dataset.
If <code>false</code>, the <code>indices</code> are assumed to refer to the columns of the already-subsetted dataset that exists in <code>state</code>;
if <code>true</code>, the <code>indices</code> are assumed to refer to the columns of the original dataset from which the subset in <code>state</code> was created.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A state object containing loaded matrix data in its <code>inputs</code> property.
Note that the other steps do not have any results, so this object should be passed through <a href="global.html#runAnalysis"><code>runAnalysis</code></a> before it can be used.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="summarizeArray"><span class="type-signature"></span>summarizeArray<span class="signature">(array, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="readers_utils_extract.js.html">readers/utils/extract.js</a>, <a href="readers_utils_extract.js.html#line40">line 40</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Summarize an array, typically corresponding to a single column of per-cell annotation.
This can be used as part of a preflight response in a Reader.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>array</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">TypedArray</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Per-cell annotation array of length equal to the number of cells for a given matrix.
An Array is treated as categorical data and should contain strings, while TypedArrays are treated as continuous data.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>limit</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>50</code>
                
                </td>
            

            <td class="description last"><p>Maximum number of unique values to report for categorical <code>x</code>.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Object containing <code>type</code>, a string indicating whether <code>array</code> was categorical or continuous.</p>
<p>If <code>&quot;categorical&quot;</code>, the object will contain <code>values</code>, an array of unique values up to the length specified by <code>limit</code>.
It will also contain <code>truncated</code>, a boolean indicating whether the actual number of unique values exceeds <code>limit</code>.</p>
<p>If <code>&quot;continuous&quot;</code>, the object will contain the numbers <code>min</code> and <code>max</code> specifying the minimum and maximum value in <code>x</code>, respectively.
<code>min</code> or <code>max</code> may be negative or positive infinity, respectively, if there is no bound on one or both ends.
If <code>min &gt; max</code>, all values in <code>array</code> are <code>NaN</code>s such that no bound can be found.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="terminate"><span class="type-signature"></span>terminate<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line40">line 40</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Terminate the backend, in particular shutting down all workers.
This is typically necessary for a clean shutdown in Node.js applications.</p>
</div>

























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A promise that resolves to <code>null</code> when all workers are terminated.</p>
</div>



    



        
            

    

    <h4 class="name" id="unpackText"><span class="type-signature"></span>unpackText<span class="signature">(buffer, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {string}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="readers_utils_extract.js.html">readers/utils/extract.js</a>, <a href="readers_utils_extract.js.html#line83">line 83</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Unpack a buffer to text, possibly with decompression.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>buffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">Uint8Array</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Contents to be unpacked.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional parameters.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>compression</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last"><p>Compression mode used for <code>buffer</code>.
This can be <code>&quot;none&quot;</code> or <code>&quot;gz&quot;</code>, with <code>null</code> performing automatic detection based on the magic words.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Text encoded by <code>buffer</code>.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="validateAnnotations"><span class="type-signature">(async) </span>validateAnnotations<span class="signature">(matrices)</span><span class="type-signature"> &rarr; {object}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="preflight.js.html">preflight.js</a>, <a href="preflight.js.html#line40">line 40</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Perform preflight validation of the annotations in the input matrices.</p>
<p>This is usually done in regards to the consistency of gene annotations for multiple matrices.
If multiple matrices are present, an error is raised if any matrix does not contain gene annotations;
or there is no common species and feature type for annotations across all matrices;
or the intersection of genes is empty.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>matrices</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>An object where each property is itself an object representing a single input matrix.
See the argument of the same name in <a href="global.html#runAnalysis"><code>runAnalysis</code></a> for more details.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An object containing preflight check information for the <code>annotations</code> and <code>features</code>.</p>
<p><code>annotations</code> is an object where each property corresponds to an input matrix in <code>matrices</code>.
Each element:</p>
<ul>
<li><code>null</code>, if the corresponding matrix does not contain any annotations.</li>
<li>An object describing the cell annotation fields in the corresponding matrix.
Each key of the inner object contains the name of an annotation field,
while each value is an object summarizing that annotation.
Each object contains:
<ul>
<li>a <code>type</code> property, indicating whether the annotation is <code>&quot;categorical&quot;</code> or &quot;<code>continuous&quot;</code>.</li>
<li>for categorical annotations, a <code>values</code> array containing the unique values.
This may be truncated for brevity, in which case the <code>truncated</code> property is <code>true</code>.</li>
<li>for continuous annotations, the <code>min</code> and <code>max</code> properties containing the minimum and maximum values.</li>
</ul>
</li>
</ul>
<p><code>features</code> is an object where each key is the name of a modality (e.g., <code>&quot;RNA&quot;</code>, <code>&quot;ADT&quot;</code>) and the property is another object.
Each inner object contains:</p>
<ul>
<li><code>common</code>: an integer containing the number of common genes across all matrices.
This may be <code>null</code> if <code>matrices</code> has only a single entry that lacks gene annotation.</li>
<li><code>fields</code>: an object where each property corresponds to an input matrix in <code>matrices</code>.
Each property is a string containing the name of the gene annotation field that was chosen for the intersection in the corresponding matrix.
This may be <code>null</code> if <code>matrices</code> has only a single entry that lacks gene annotation.</li>
</ul>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on Sat Jul 30 2022 20:13:36 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>